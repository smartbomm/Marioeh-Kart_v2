#include <Arduino.h>
#include "sam.h"
#include "PinConfig.h"

volatile bool interrupt_triggered = false;

void EIC_Handler(void) {
    if (EIC->INTFLAG.reg & EIC_INTFLAG_EXTINT7) {
        EIC->INTFLAG.reg = EIC_INTFLAG_EXTINT7;  // Flag lÃ¶schen
        barcodeIsr();  // Barcode ISR aufrufen
    }
}



void setup() {
    SerialUSB.begin(9600);
    while (!SerialUSB);  // Warten bis USB verbunden

    configure_extint();
    SerialUSB.println("System bereit. Warte auf Interrupt an PA07 (D9).");
}

void loop() {
    if (interrupt_triggered) {
        interrupt_triggered = false;
        SerialUSB.println(">> Interrupt an PA07 erkannt!");
    }
}
